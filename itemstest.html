<!DOCTYPE html>
<html>
    <head>
        <title>dbReadingTest</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyDRuQ_z-_hbAaVdfEa_xwkV9xDZWKRHnv0",
            authDomain: "comp1930-project-33dd7.firebaseapp.com",
            databaseURL: "https://comp1930-project-33dd7.firebaseio.com",
            projectId: "comp1930-project-33dd7",
            storageBucket: "comp1930-project-33dd7.appspot.com",
            messagingSenderId: "1015530534917"
          };
          firebase.initializeApp(config);
        </script>
        <link rel= "stylesheet" href="BrowserCss.CSS" />
        <style>
            .cartItem{
                width:inherit;
            /*    display:flex;*/
                font-size: 10pt;
                justify-content: space-around;

            }

            .cartItem>img{
                height:50px;
                width: 50px;
            }
            .cartItem>*{
                display:inline-block;
            }
            
            #content {
                display:flex;
            }
        </style>
    </head>
    
    <body>
        <div id="content"></div>
        
        <script>
            function Item(obj){
                this.type = obj.type,
                this.lister = obj.lister,
                this.tags = obj.tags,
                this.colors = obj.colors,
                this.image = obj.image,
                this.price = obj.price,
                this.sizes = obj.sizes,
                    
                this.displayBrowse = function (){
                    var container = $("<figure></figure>").append($("<img src = "+this.image+" alt = 'image of clothing item'>"));
                    
                    var text = $("<figcaption></figcaption>");
                    text.append($("<p class = 'type'>"+this.type+"</p>"));
                    text.append($("<p class ='price'>"+this.price+"</p>"));
                    
                    container.append(text);
                    
                    container.click(function(){
                        console.log("hello");
                    });
                    
                    return container;

                },
                this.displayItempage = function (){
                    var container = document.createElement("div");
                    
                    
                },
                this.displayCart = function(){
                    var container = $("<div class = 'cartItem'></div>").append($("<img src = "+this.image+" alt = 'image of clothing item'>"));
                    
                    var text = $("<div></div>");
                    text.append($("<p class = 'price'>"+this.price+"</p>"));
                    text.append($("<p class ='size'>"+this.sizes+"</p>"));
                    
                    container.append(text);
                    
                    container.click(function(){
                        console.log("hello");
                    });
                    
                    return container;
                    
                }
                
            }
            
            
            
            var dbItemsRef = firebase.database().ref().child("items");
            
            dbItemsRef.on(
                "value",
                function(snap) {
                    console.log("Get items successful!");
                    console.log(snap.val());
                    snap.val().forEach(function(element){
                        let temp = new Item(element);
                        console.log(temp);
                        $("#content").append(temp.displayBrowse());
                    })
                });
            
            
            
            var test1 = new Item({"type":"shirt", "lister":"wuviv", "tags":[], "sizes":["s","m"], "colors":"black", "image":"https://i.ytimg.com/vi/K1rH_BdaLpo/maxresdefault.jpg", "price":"$15.00"});
            console.log(test1);
            $("#content").append(test1.displayBrowse());
        </script>
    </body>
</html>