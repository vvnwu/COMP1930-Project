<!DOCTYPE html>
<html>
<head>

	<title>ToBeDetermine</title>
	<link rel= "stylesheet" href="BrowserCss.CSS" />

	<!--filter and cart icon-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	<!--jquery-->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyDRuQ_z-_hbAaVdfEa_xwkV9xDZWKRHnv0",
	    authDomain: "comp1930ee-project-33dd7.firebaseapp.com",
	    databaseURL: "https://comp1930-project-33dd7.firebaseio.com",
	    projectId: "comp1930-project-33dd7",
	    storageBucket: "comp1930-project-33dd7.appspot.com",
	    messagingSenderId: "1015530534917"
	  };
	  firebase.initializeApp(config);
	</script>


	<style>
		#currentCloset{
            display: flex;
            flex-flow: column;
            background-color:pink;
            height: 50%;

        }

        .cartItem{
            width:inherit;
        /*    display:flex;*/
            font-size: 10pt;
            justify-content: space-around;

        }

        .cartItem>img{
            height:50px;
            width: 50px;
        }
        .cartItem>*{
            display:inline-block;
        }
		#cartDiv{
			display: none;
		}
	</style>

</head>
<body>
  
    <header>
    <div id="container">
      
      <nav id= "featureMenu">
        <li><a href="home.html">HOME</a></li>
        <li><a href="browse.html">BROWSE</a></li>
        <li><a href="upcycle.html">UPCYCLE</a></li>
        <li><a href="about.html">ABOUT</a></li>
      </nav>
      <div class="inputcontainer">
        <input id="searchbar" type = "text" placeholder="Search Clothes" name="Search">
        <input id="button" type="submit" id="submit" name="SEARCH" value="Submit"/>
      </div>
      <nav id="greynav">
          <ul>
            <li><a href="#">Mens</a>
              <ul>
                <li><a href="#">Outerwear</a></li>
                <li><a href="#">Tops</a></li>
                <li><a href="#">Bottoms</a></li>
                <li><a href="#">Shoes</a></li>
              </ul>
            </li>
            <li><a href="#">Womens</a>
              <ul>
                <li><a href="#">Outerwear</a></li>
                <li><a href="#">Tops</a></li>
                <li><a href="#">Bottoms</a></li>
                <li><a href="#">Shoes</a></li>
              </ul>
            </li>
            <li><a href="#">Unisex</a>
              <ul>
                <li><a href="#">Outerwear</a></li>
                <li><a href="#">Tops</a></li>
                <li><a href="#">Bottoms</a></li>
                <li><a href="#">Shoes</a></li>
              </ul>
            </li>
            <li><a href="#">Kids</a>
              <ul>
                <li><a href="#">Outerwear</a></li>
                <li><a href="#">Tops</a></li>
                <li><a href="#">Bottoms</a></li>
                <li><a href="#">Shoes</a></li>
              </ul>
            </li>
          </ul>
      </nav>
    </div>
	</header>
  
	<aside>
        <div>
            <i id = "filterButton" class="fas fa-filter"></i>
            <i id = "orderButton" class="fas fa-shopping-basket"></i>
        </div>
	    <div id= "filterDiv">
			<p>FILTERS APPLIED</p>
			<hr>
			<p id= filtersApplied></p>
			<p>FILTERS</p>
			<hr>
			<ul>
				<li id="filter_size">Size </li>
				<li id="filter_brand">Brand</li>
				<li id="filter_style">Style</li>
				<li id="filter_color">Colour</li>
				<li id= "filter_price">Price Range</li>
			</ul>
		</div>
		<div id= "cartDiv">
			<p>CURRENT ORDER</p>
			<hr>
			<p id= "closet">CLOSET ( to borrow )</p>
	        <div id="currentCloset">
	            <div class="cartItem" id="closet0">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00 / 2 weeks</p>
	                    <p class ="size">S</p>
	                </div>   
	            </div>
	            
	            <div class="cartItem" id="closet1">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00 / 2 weeks</p>
	                    <p class ="size">M</p>
	                </div>   
	            </div>
	            
	             <div class="cartItem" id="closet2">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00</p>
	                    <p class ="size">L</p>
	                </div>   
	            </div>
	        </div>
	            
			<p id = "cart">CART ( to keep )</p>
	        <div id="currentCart">
	             <div class="cartItem" id="cart0">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00</p>
	                    <p class ="size">S</p>
	                </div>   
	            </div>
	            
	            <div class="cartItem" id="cart1">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00</p>
	                    <p class ="size">M</p>
	                </div>   
	            </div>
	            
	             <div class="cartItem" id="cart2">
	                <img src="https://dummyimage.com/50x50/000/fff" alt = "clothing image">
	                <div>
	                    <p class ="price">$15.00</p>
	                    <p class ="size">L</p>
	                </div>   
	            </div>
	        </div>
			<button id= "checkoutForCart">Checkout</button>
		</div>
	</aside>
    <div id="content"></div>
    
	<!--script for cart and closet-->
	<script type="text/javascript">
		//mouse action when click
		$("#orderButton").click(function(event){
			$("#filterDiv").css({"display": "none"});
			$("#cartDiv").css({"display": "inline"});
		});
		
		$("#filterButton").click(function(event){
			$("#filterDiv").css({"display": "inline"});
			$("#cartDiv").css({"display": "none"});
		});

		$("#checkoutForCart").click(function(event){
			var closetItems = [];
			var cartItems = [];
			var currentItem;
			for(i = 0; i < 3; i ++){
				currentItem = document.getElementById("closet"+ i);
				closetItems[i].color;
				closetItems[i].price;
				closetItems[i].size;
				closetItems[i].type;

			}

		});
		//icon mouse action display effect
		$("#orderButton").mousedown(function(){
			$("#orderButton").css({"color": "grey"});
		});
		$("#orderButton").mouseup(function(){
			$("#orderButton").css({"color": "black"});
		});
		$("#filterButton").mousedown(function(){
			$("#filterButton").css({"color": "grey"});
		});
		$("#filterButton").mouseup(function(){
			$("#filterButton").css({"color": "black"});
		});
	</script>
    <!-- script for item population via class-->
    <script>
        function Item(obj){
                this.type = obj.type,
                this.lister = obj.lister,
                this.tags = obj.tags,
                this.colors = obj.colors,
                this.image = obj.image,
                this.price = obj.price,
                this.sizes = obj.sizes,
                    
                this.displayBrowse = function (){
                    var container = $("<figure></figure>").append($("<img src = "+this.image+" alt = 'image of clothing item'>"));
                    
                    var text = $("<figcaption></figcaption>");
                    text.append($("<p class = 'type'>"+this.type+"</p>"));
                    text.append($("<p class ='price'>"+this.price+"</p>"));
                    
                    container.append(text);
                    
                    container.click(function(){
                        console.log("hello");
                    });
                    
                    return container;

                },
                this.displayItempage = function (){
                    var container = document.createElement("div");
                    
                    
                },
                this.displayCart = function(){
                    var container = $("<div class = 'cartItem'></div>").append($("<img src = "+this.image+" alt = 'image of clothing item'>"));
                    
                    var text = $("<div></div>");
                    text.append($("<p class = 'price'>"+this.price+"</p>"));
                    text.append($("<p class ='size'>"+this.sizes+"</p>"));
                    
                    container.append(text);
                    
                    container.click(function(){
                        console.log("hello");
                    });
                    
                    return container;
                    
                }
                
            }
            
            
            var dbItemsRef = firebase.database().ref().child("items");
            
            dbItemsRef.on(
                "value",
                function(snap) {
                    console.log("Get items successful!");
                    console.log(snap.val());
                    snap.val().forEach(function(element){
                        let temp = new Item(element);
                        console.log(temp);
                        $("#content").append(temp.displayBrowse());
                    })
                });
    </script>
    
<!--
	<script type="text/javascript">
			//listing items using javascript
			var content = document.createElement("div");
			var itemListingRow = [];
			itemListingRow[0] = document.createElement("div");
			itemListingRow[1] = document.createElement("div");
			var itemListingCol = [];
			var figure = [];
			var item = [];
			var itemDescription = [];
			for (i= 0; i < 8 ; i++) {
				itemListingCol[i] = document.createElement("div");	
				itemListingCol[i].setAttribute("class", "itemListingCol");
				figure[i] = document.createElement("figure");
				item[i] = document.createElement("img");
				item[i].setAttribute("src", "https://dummyimage.com/140x180/000/fff");
				itemDescription[i] = document.createElement("figcaption");
				itemDescription[i].innerText = "Item Description #" + (i+1);
				itemDescription[i].setAttribute("id", "itemDescription" + i);
			}
			document.body.appendChild(content);
				content.appendChild(itemListingRow[0]);
				content.appendChild(itemListingRow[1]);
					for(i=0; i < 4; i ++){
						itemListingRow[0].appendChild(itemListingCol[i]);
							itemListingCol[i].appendChild(figure[i]);
								figure[i].appendChild(item[i]);
								figure[i].appendChild(itemDescription[i]);
					}
					for(i=4; i < 8; i ++){
						itemListingRow[0].appendChild(itemListingCol[i]);
							itemListingCol[i].appendChild(figure[i]);
								figure[i].appendChild(item[i]);
								figure[i].appendChild(itemDescription[i]);
					}


			/*items' type accessing from firebase
			 */
			var itemTypeData = [];
			for (i = 0; i< 8 ; i++){
			itemTypeData[i] = firebase.database().ref().child("items").child(i).child("type");
			}
			/*items' price accessing from firebase
			 */
			var itemPriceData = [];
			for (i = 0; i< 8 ; i++){
			itemPriceData[i] = firebase.database().ref().child("items").child(i).child("price");
			}
			

			//helper method to listen from database
			var listening = function(number){
				itemTypeData[number].on(
					'value', 
					function(snap){
						itemDescription[number].innerText = snap.val();
					});
				itemPriceData[number].on(
					'value', 
					function(snap){
						itemDescription[number].innerText += "_Price:" +snap.val();
					});
			}
			//helper method to store data in localStorage
				var itemObj = new Object();
				var localStore = function(itemNumber) {
				var typeData = firebase.database().ref().child("items").child(itemNumber).child("type");
				var priceData = firebase.database().ref().child("items").child(itemNumber).child("price");
				var sizeData = firebase.database().ref().child("items").child(itemNumber).child("size");
				var colorData = firebase.database().ref().child("items").child(itemNumber).child("color");
				var listerData = firebase.database().ref().child("items").child(itemNumber).child("lister");
				//var type, price, size, color, lister;

				typeData.on('value', function(snap){
					itemObj["type"] = snap.val();

				});
				priceData.on('value', function(snap){
					itemObj["price"] = snap.val();
				});
				sizeData.on('value', function(snap){
					itemObj["size"] = snap.val();
				});
				colorData.on('value', function(snap){
					itemObj["color"] = snap.val();
				});
				listerData.on('value', function(snap){
					itemObj["lister"] = snap.val();
				});
				console.log("-------------------------------------------");
				console.log(itemObj);
				var testing = JSON.stringify(itemObj);
				localStorage.setItem("item123",testing);
				console.log("ARE YOU WORKING: " + localStorage.getItem("item123"));

			}
			

			for(i= 0; i < 8; i++){
			listening(i);
			

			}
			figure[0].addEventListener("click", function(){
			localStore(0)});
			figure[1].addEventListener("click", function(){
			localStore(1)});
			figure[2].addEventListener("click", function(){
			localStore(2)});
			figure[3].addEventListener("click", function(){
			localStore(3)});
			figure[4].addEventListener("click", function(){
			localStore(4)});
			figure[5].addEventListener("click", function(){
			localStore(5)});
			figure[6].addEventListener("click", function(){
			localStore(6)});
			figure[7].addEventListener("click", function(){
			localStore(7)});


	</script>
-->

</body>
</html>